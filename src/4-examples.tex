%  ___                     _
% | __|_ ____ _ _ __  _ __| |___ ___
% | _|\ \ / _` | '  \| '_ \ / -_|_-<
% |___/_\_\__,_|_|_|_| .__/_\___/__/
%                    |_|
\section{Illustrative Examples}
\label{sec:examples}

% Provide at least one illustrative example to demonstrate the major functions.

% Optional: you may include one explanatory video that will appear next to your article,
% in the right hand side panel. (Please upload any video as a single supplementary file with
% your article. Only one MP4 formatted, with 50MB maximum size, video is possible per article.
% Recommended video dimensions are 640 x 480 at a maximum of 30 frames/second. Prior to
% submission please test and validate your .mp4 file at
% $ http://elsevier-apps.sciverse.com/GadgetVideoPodcastPlayerWeb/verification$. This tool
% will display your video exactly in the same way as it will appear on ScienceDirect.).
As example, an implementation of an algorithm that extimates the \emph{order of convergence} for trapezoidal integration scheme \cite{weideman2002numerical} is provided, using the automatic differentiation as interface.

Given a function $f(x)$, the trapezoidal rule for primitive estimation in the interval $[a,\,b]$ is:
\begin{equation}
  I_{n}(a, b) = \dfrac{b - a}{n} \left( \dfrac{f(a) + f(b)}{2} +
    \sum\limits_{k = 1}^{n - 1}{f \left( a + k \dfrac{b - a}{n} \right)} \right)
\end{equation}
where $n$ mediates the integration's step size. When exact primitive $F(x)$ is known, approximation error is:
\begin{equation}
  E[n] = F(b) - F(a) - I_{n}(a, b)
\end{equation}
This error shows a direct relation:
\begin{equation}
  E[n] \propto C\,{n}^{-p}
\end{equation}
where $p$ is the convergence order. Using a different value for $n$, for example $2\,n$:
\begin{equation}
  \dfrac{E[n]}{E[2\,n]} \approx 2^{p} \quad \rightarrow \quad p \approx log_2 \left( \dfrac{E[n]}{E[2\,n]} \right)
\end{equation}
Following listings contain the implementation of the described procedure using the described gem and the well known \emph{Python} \cite{van2011python} library \emph{sympy} \cite{christopher_smith_2016_47274}.

\noindent%
  \begin{minipage}{.5\textwidth}
    \lstinputlisting[style=customruby,caption={Ruby version}]{./scripts/test.rb}
  \end{minipage}\hfill
  \begin{minipage}{.5\textwidth}
    \lstinputlisting[style=customruby,language=python,caption={Python version},frame=tbl]{./scripts/test.py}
  \end{minipage}
